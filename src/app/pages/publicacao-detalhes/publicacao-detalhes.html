<div class="detalhes-post-container" *ngIf="post; else carregandoPost">
  <a routerLink="/comunidade">Voltar para a Comunidade</a>
  
  <div class="post-header">
    <h1>{{ post.titulo }}</h1>
    <p>por: {{ post.autor?.nome || 'Usuário' }}</p>
  </div>

  <div class="post-body">
    <p>{{ post.conteudo }}</p>
  </div>

  <hr>

  <div class="comentarios-section">
    <h2>Comentários</h2>

    <div class="comentario-form">
      <form [formGroup]="comentarioForm" (ngSubmit)="onComentarioSubmit()">
        <div class="form-group">
          <label for="conteudo">Deixe seu comentário</label>
          <textarea id="conteudo" formControlName="conteudo" rows="3"></textarea>
        </div>
        <button type="submit" [disabled]="comentarioForm.invalid">Comentar</button>
      </form>
    </div>

    <div *ngIf="post.comentarios && post.comentarios.length > 0; else noComentarios" class="lista-comentarios">
      <div *ngFor="let comentario of post.comentarios" class="comentario-item">
        <p><strong>{{ comentario.autor?.nome || 'Usuário' }}:</strong></p>
        <p>{{ comentario.conteudo }}</p>
      </div>
    </div>
    <ng-template #noComentarios>
      <p>Seja o primeiro a comentar!</p>
    </ng-template>
  </div>
</div>

<ng-template #carregandoPost>
  <p>Carregando publicação...</p>
</ng-template>